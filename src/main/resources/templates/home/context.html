<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" th:href="@{/plugins/bootstrap/css/bootstrap.min.css}">
    <link th:href="@{http://cdn.bootcss.com/highlight.js/8.0/styles/monokai_sublime.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css}">
    <link rel="stylesheet" th:href="@{css/context.css}">
    <script th:src="@{/plugins/wangEditor/wangEditor.min.js}"></script>
    <script th:src="@{/plugins/jquery/jquery-3.6.0.min.js}"></script>
    <script th:src="@{/js/DataDeal.js}"></script>
    <script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/plugins/highlight.min.js}"></script>
    <script th:src="@{https://cdn.bootcdn.net/ajax/libs/sweetalert/2.1.2/sweetalert.min.js}"></script>
    <script th:src="@{/js/context.js}"></script>
    <title>文章发布</title>
</head>
<body>



    <nav class="navbar navbar-expand-lg navbar-light bg-dark navbar-fixed-top sticky-top">
     
          <!-- Brand and toggle get grouped for better mobile display -->
          <a class="navbar-brand text-light" href="#">
            <img src="img/logo.png" width="70" height="30" class="d-inline-block align-top" alt="">
            码农之家
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

        
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <a class="nav-link text-light" href="#">论坛</a>
              </li>
              <li class="nav-item active">
                <a class="nav-link text-light" href="#">我的博客</a>
              </li>
              
              <li class="nav-item">
                <a class="nav-link text-light" href="#">问答</a>
              </li>
            
              <li class="nav-item">
                <a class="nav-link text-light" href="#">资源</a>
              </li>
            </ul>
           
            <form class="form-inline my-2 my-lg-0 mr-auto ">
              <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success my-2 my-sm-0" type="submit">搜索</button>
            </form>
          

            <ul class="nav navbar-nav navbar-right">
              <li><a class="nav-link text-light" href="#">发帖</a></li>
              <li><a class="nav-link text-light" href="#">发博客</a></li>
                <block th:if="${session.user==null}">
            <li><a class="nav-link text-light" href="/login">登录</a></li>
                </block>
            <block th:if="${session.user!=null}">
            <li class="dropdown">
              <a class="nav-link text-light" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><img src="..." class="rounded-sm" alt="">用户名： <span class="caret"th:text="${session.user.uname}"></span></a>
              <ul class="dropdown-menu">
                <li><a class="nav-link" href="#">我的博客</a></li>
                <li><a class="nav-link" href="#">个人设置</a></li>
                <li><a class="nav-link" href="#">后台管理</a></li>
                <li role="separator" class="divider"></li>
                <li><a class="nav-link" href="#">退出</a></li>
              </ul>
            </li>
            </block>
          </ul>

        </div>

      </nav>

      <div class="row centext">
      <div class="centext">
        <div class="col-md-4" style="margin-top: 15px;">
          <button class="btn btn-outline-secondary border-0" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-90deg-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"/>
            </svg>
            返回
          </button>
        </div>
      <form id="text-table">
          <div class="context-table">
        <div class="form-group row" style=" margin-top: 30px;  ">
          <label for="headline" class="col-sm-2 col-form-label">文章标题：</label>
          <div class="col-sm-7">
            <input type="email" class="form-control" id="headline" name="headline">
          </div>
        </div>

        <div class="form-group row">
            <label for="type" class="col-sm-2 col-form-label">类型：</label>
            <div class="col-sm-4">
            <select class="custom-select my-1 mr-sm-1" id="type" name="type">
              <option selected>选择文章类型</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
        </div>
        </div>
    </div>
       
        
        <div class="context-edit">
            <div id="div1">
              <p>欢迎使用 <b>wangEditor</b> 富文本编辑器</p>
           </div>

          </div>
          <textarea style="display: none;" name="word" id="text1"></textarea>
        <div class="form-group row">
          
          
          <div class="col-sm-10 center context-btn" style="margin-left: 35%;">
            <button id="submittext" name="button" type="button"  class="btn btn-primary">发布</button>
          <button id="cancel" name="button" type="reset" class="btn btn-secondary">保存为草稿</button>
        </div>
        </div>
      </form>

    </div>
</div>



<!--    <script  th:src ="@{https://rawgit.com/leizongmin/js-xss/master/dist/xss.js}" > </script>-->
    <!-- 引入 wangEditor.min.js -->
    <script type="text/javascript">
      const E = window.wangEditor
    const editor = new E('#div1')
    const $text1 = $('#text1')
    // 设置层级
    editor.config.uploadImgShowBase64 = true
 
    editor.config.zIndex = 1
    // 挂载代码高亮
    editor.highlight = hljs
   //设置高度
   editor.config.height = 400
   //数据同步在text区域，方便提交

   editor.config.onchange = function (html) {
         // const safeHtml = xss(html)
        // 第二步，监控变化，同步更新到 textarea
        $text1.val(html)
    }
    // 创建编辑器
    editor.create()
  
    // 第一步，初始化 textarea 的值
    $text1.val(editor.txt.html('<p>在这里输入文章内容</p>'))
    </script>



      </body>